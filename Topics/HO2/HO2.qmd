---
title: "Extensions of ggplot2"
author: "Wan Kee"
date: "9 January 2024"
---

![](images/image2.jpg)

# 1 Learning Objectives

-   Annotate or label data using `ggrepel` package
-   Create publication quality figure by using `ggthemes` and `hrbrthemes` packages
-   Plot composite figure to combine ggplot2 graphs using `patchwork` package

# 2 Load Packages

Beside tidyverse, the following R packages will be used:

-   `ggrepel` provides geoms to repel overlapping text labels
-   `ggthemes` provides themes, geoms, and scales
-   `hrbrthemes` provides typography-centric themes and theme components
-   `patchwork` prepares composite figures

```{r}
pacman::p_load(ggrepel, patchwork, ggthemes, hrbrthemes, tidyverse) 
```

# 3 Import Data

`exam_data` is a year end examination grades of a cohort of Primary 3 students from a local school.

The output shows a total of **seven attributes**; four of them are **categorical attributes** (ID, CLASS, GENDER and RACE) and the other three are **continuous attributes** (MATHS, ENGLISH and SCIENCE).

```{r}
exam_data <- read.csv("data/Exam_data.csv")
summary(exam_data)
```

# 4 Annotate Data using ggrepel

`ggrepel` is an extension of ggplot2 package which provides geoms for ggplot2 to repel overlapping text.

We simply replace geom_text() by geom_text_repel() and geom_label() by geom_label_repel.


::: panel-tabset

## ggplot
```{r}
ggplot(data = exam_data, 
       aes(x = MATHS, 
           y = ENGLISH)) +
  geom_point() +
  geom_smooth(method=lm, 
              size=0.5) +  
  geom_label(aes(label = ID), 
             hjust = 0.5, 
             vjust = -0.5) +
  coord_cartesian(xlim=c(0,100),
                  ylim=c(0,100)) +
  ggtitle("English and Maths Scores using Scatterplot")+
  theme_minimal()+
  theme(legend.position = "none",
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(),
        axis.line = element_line(colour = "grey"))
```

### ggrepel

```{r}
ggplot(data = exam_data, 
       aes(x = MATHS, 
           y = ENGLISH)) +
  geom_point() +
  geom_smooth(method = lm, 
              size = 0.5) +  
  geom_label_repel(aes(label = ID), 
                   fontface = "bold") +
  coord_cartesian(xlim=c(0,100),
                  ylim=c(0,100)) +
  ggtitle("English and Maths Scores using Scatterplot (ggrepel)")+
  theme_minimal()+
  theme(legend.position = "none",
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(),
        axis.line = element_line(colour = "grey"))
```
Warning: ggrepel: 318 unlabeled data points (too many overlaps). Consider increasing max.overlaps
:::

